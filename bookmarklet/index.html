data:text/html;base64,PGh0bWw+CjxoZWFkPgoKPHNjcmlwdCBzcmM9J2h0dHBzOi8vYXBpLm1hcGJveC5jb20vbWFwYm94LmpzL3YzLjMuMS9tYXBib3guanMnPjwvc2NyaXB0Pgo8bGluayBocmVmPSdodHRwczovL2FwaS5tYXBib3guY29tL21hcGJveC5qcy92My4zLjEvbWFwYm94LmNzcycgcmVsPSdzdHlsZXNoZWV0JyAvPgoKPHN0eWxlPgogICogeyBib3gtc2l6aW5nOiBib3JkZXItYm94OyB9CiAgaHRtbCwgYm9keSB7IG1hcmdpbjogMDsgfQogIGJvZHksIHRleHRhcmVhLCBpbnB1dCB7IGZvbnQtZmFtaWx5OiAtYXBwbGUtc3lzdGVtLEJsaW5rTWFjU3lzdGVtRm9udCxTZWdvZSBVSSxSb2JvdG8sSGVsdmV0aWNhIE5ldWUsVWJ1bnR1LHNhbnMtc2VyaWY7IGNvbG9yOiAjNGY1NjZiOyB9CiAgYm9keSB7IHRleHQtYWxpZ246IGNlbnRlcjsgYm94LXNpemluZzogYm9yZGVyLWJveDsgZm9udC1zaXplOiAxNHB4OyBsaW5lLWhlaWdodDogMS42MjU7IC13ZWJraXQtZm9udC1zbW9vdGhpbmc6IGFudGlhbGlhc2VkIH0KICBib2R5ID4gZGl2IHsgcG9zaXRpb246IGZpeGVkOyBkaXNwbGF5OiBmbGV4OyBoZWlnaHQ6IDEwMCU7IHdpZHRoOiAxMDAlOyB0ZXh0LWFsaWduOiBsZWZ0OyB9CiAgc2VjdGlvbjpmaXJzdC1jaGlsZCB7IGZsZXgtYmFzaXM6IDcwMHB4OyBmbGV4LXNocmluazogMDsgIH0KICBzZWN0aW9uOmxhc3QtY2hpbGQge2ZsZXgtZ3JvdzogMTsgb3ZlcmZsb3cteDogYXV0bzsgcG9zaXRpb246IHJlbGF0aXZlOyBiYWNrZ3JvdW5kOiAjMDAwfQogIHNlY3Rpb246bGFzdC1jaGlsZCBpbWcgeyBtYXgtd2lkdGg6IDEwMCU7IH0KCiAgI21hcCB7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7IH0KICAubGlzdGluZy1tYXJrZXIgeyBiYWNrZ3JvdW5kOiAjZmZmOyBsaW5lLWhlaWdodDogMTFweDsgY29sb3I6ICMwMDA7IGZvbnQtd2VpZ2h0OiBib2xkOyB0ZXh0LWFsaWduOiBjZW50ZXI7IGRpc3BsYXk6IGlubGluZS1ibG9jazsgZm9udC1zaXplOiAxMHB4OyBwYWRkaW5nOiAwIDJweDsgYm9yZGVyLXJhZGl1czogM3B4OyBib3JkZXI6IDFweCBzb2xpZCAjMDAwfQogIC5saXN0aW5nLW1hcmtlciA+IHNwYW4geyBjb2xvcjogb3JhbmdlOyBsaW5lLWhlaWdodDogMDsgcG9zaXRpb246IHJlbGF0aXZlOyB0b3A6IDZweDsgZm9udC1zaXplOiAyNnB4OyB9CiAgLmxpc3RpbmctcHJvcGVydHkgPiBzcGFuOmFmdGVyIHsgY29udGVudDogJy8nOyBwYWRkaW5nOiAwIDVweDsgfQogIC5saXN0aW5nLXByb3BlcnR5ID4gc3BhbjpsYXN0LWNoaWxkOmFmdGVyIHsgY29udGVudDogJyc7IHBhZGRpbmc6IDA7IH0KICAubGlzdGluZy1wcmljZSB7IGZvbnQtc2l6ZTogMTZweDsgY29sb3I6ICMwMDA7IH0KCiAgLmxlYWZsZXQtcG9wdXAgeyBtYXJnaW4tYm90dG9tOiAyMnB4OyB9CiAgLmxlYWZsZXQtcG9wdXAtY29udGVudC13cmFwcGVyIHsgYm9yZGVyOiAxcHggc29saWQgIzAwMDsgfQogIC5sZWFmbGV0LXBvcHVwLWNvbnRlbnQgeyBwYWRkaW5nOiAxMHB4OyB9CiAgLmxlYWZsZXQtcG9wdXAtdGlwLWNvbnRhaW5lciwgLmxlYWZsZXQtcG9wdXAtY2xvc2UtYnV0dG9uIHsgZGlzcGxheTogbm9uZTsgfQo8L3N0eWxlPgoKPHNjcmlwdD4KCmNvbnN0IHhoclVSTCA9IChvcHRpb25zKSA9PiB7CiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkgewogICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwogICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiByZXNvbHZlKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KSwgcGFyYW1zOiBvcHRpb25zLnBhcmFtcyB9KSk7CiAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCAoKSA9PiByZXNvbHZlKHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdFcnJvciBnZXR0aW5nIHRoZSBVUkwgJyArIG9wdGlvbnMudXJsIH0pKTsKICAgIHhoci5vcGVuKG9wdGlvbnMubWV0aG9kLCBvcHRpb25zLnVybCk7CiAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC10eXBlJywgb3B0aW9ucy5jb250ZW50X3R5cGUpOwogICAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhvcHRpb25zLnBhcmFtcykudG9TdHJpbmcoKTsKICAgIHhoci5zZW5kKHBhcmFtcyk7CiAgfSk7Cn0KCmNvbnN0IGN1cnJlbmN5Rm9ybWF0ID0gbmV3IEludGwuTnVtYmVyRm9ybWF0KCdlbi1VUycsIHsKICBzdHlsZTogJ2N1cnJlbmN5JywKICBjdXJyZW5jeTogJ1VTRCcsCiAgbWF4aW11bUZyYWN0aW9uRGlnaXRzOiAwLAp9KTsKCmNvbnN0IGtGb3JtYXR0ZXIgPSBudW0gPT4gewogIHJldHVybiBNYXRoLmFicyhudW0pID4gOTk5ID8gTWF0aC5zaWduKG51bSkqKChNYXRoLmFicyhudW0pLzEwMDApLnRvRml4ZWQoMSkpICsgJ2snIDogTWF0aC5zaWduKG51bSkqTWF0aC5hYnMobnVtKQp9Cgpjb25zdCBkYXlzVG9ZTUQgPSB4ID0+IHsKICBjb25zdCB5ID0gMzY1OwogIGNvbnN0IHkyID0gMzE7CiAgY29uc3QgcmVtYWluZGVyID0geCAlIHk7CiAgY29uc3QgY2FzaW8gPSByZW1haW5kZXIgJSB5MjsKICBjb25zdCB5ZWFyID0gKHggLSByZW1haW5kZXIpIC8geTsKICBjb25zdCBtb250aCA9IChyZW1haW5kZXIgLSBjYXNpbykgLyB5MjsKICBsZXQgcmVzdWx0ID0gYCR7KHllYXIgPyB5ZWFyICArICcgWWVhcnMgJzogJycpfSR7KG1vbnRoID8gbW9udGggKyAnIE1vbnRocyAnIDogJycpfSR7KGNhc2lvID8gY2FzaW8gKyAnIERheXMgJyA6ICcnKX1gOwogIHJldHVybiByZXN1bHQ7Cn0KCmNvbnN0IGxvYWRJbWFnZSA9IGFzeW5jIHVybCA9PiB7CiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLHJlamVjdCkgPT4gewogICAgbGV0IGltZyA9IG5ldyBJbWFnZSgpOwogICAgaW1nLnNyYyA9IHVybDsKICAgIGltZy5vbmxvYWQgPSAoKSA9PiB7CiAgICAgIGlmKGltZy5uYXR1cmFsV2lkdGggPT09IDApIHJldHVybiByZXNvbHZlKGZhbHNlKQogICAgICByZXR1cm4gcmVzb2x2ZShpbWcpOwogICAgfQogIH0pCn0KCmNvbnN0IGluaXQgPSBhc3luYyAoZXZlbnQpID0+IHsKCiAgLy8gR2V0IGRhdGEgZnJvbSBTaG9yZXdlc3QgLSBjcmF6eSBmYXN0CiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB4aHJVUkwoewogICAgbWV0aG9kOiAnUE9TVCcsCiAgICB1cmw6ICdodHRwczovL3d3dy5zaG9yZXdlc3QuY29tL3ZwL2pzcHMvQ09NTU9OL21hcHNfdjYvc3BoaW54My5qc3AnLAogICAgY29udGVudF90eXBlOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJywKICAgIHBhcmFtczogewogICAgICBTSVRFOiAnU0hPUkVXJywKICAgICAgTUFYX1JFU1VMVF9DT1VOVDogJzMwMCcsCiAgICAgIExMX1JFU19MQVRfTE9XOiAnNDMuMDIwNDM2NjA0OTM5NTgnLAogICAgICBMTF9SRVNfTEFUX0hJR0g6ICc0My4xMDU5NzAyNzAwMDczMicsCiAgICAgIExMX1JFU19MT05HX0xPVzogJy04Ny45NzU2NDQ5OTA4MDE4MycsCiAgICAgIExMX1JFU19MT05HX0hJR0g6ICctODcuODYzMjA2Nzg4ODk3NTMnLAogICAgICAvL0xfTElTVElOR1NUQVRVUzogJ1NvbGQnLAogICAgICBMX0xJU1RJTkdTVEFUVVM6ICdBY3RpdmV8RGVsYXllZHxBY3RpdmVXT3xBY3RpdmUgdy9Db250cmFjdHxQZW5kaW5nfE9mZmVyLVNob3d8T2ZmZXInLAogICAgICBMQzRfVjQ2QzogJ1R3byBGYW1pbHl8TXVsdGktRmFtaWx5JywKICAgICAgLy9MQzRfVjQ2QzogJ0J1c2luZXNzL0NvbW1lcmNpYWwnLAogICAgICAvL0xDNF9WNDZDOiAnU2luZ2xlIEZhbWlseSBSZXNpZGVudGlhbCcsCiAgICAgIHNvcnRDcml0ZXJpYTogJ2xfbGlzdGluZ19kYXRlIERFU0MnLAogICAgfQogIH0pCgogIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEubGlzdGluZ3MubGVuZ3RoKQoKICAvLyBOb3JtYWxpemUgZGF0YSBpbiBHZW9Kc29uIGZvcm1hdAogIGNvbnN0IGZlYXR1cmVzID0gYXdhaXQgcmVzcG9uc2UuZGF0YS5saXN0aW5ncy5tYXAoIChsaXN0aW5nLGkpID0+IHsKICAgIGNvbnN0IGxpc3RpbmdfZGV0YWlscyA9IEpTT04ucGFyc2UobGlzdGluZy5MSVNUSU5HX0dFTkFUVFJJQlMpOwogICAgcmV0dXJuIHsKICAgICAgdHlwZTogJ0ZlYXR1cmUnLAogICAgICBnZW9tZXRyeTogewogICAgICAgIHR5cGU6ICdQb2ludCcsCiAgICAgICAgY29vcmRpbmF0ZXM6IFtsaXN0aW5nLkxMX1JFU19MT05HLCBsaXN0aW5nLkxMX1JFU19MQVRdCiAgICAgIH0sCiAgICAgIHByb3BlcnRpZXM6IHsKICAgICAgICBpbmRleDogaSwKICAgICAgICB0aXRsZTogYCR7cGFyc2VJbnQobGlzdGluZy5MX05PX0RBWVNfT05fTUFSS0VUKSA8IDIgPyAnPHNwYW4+JmJ1bGw7PC9zcGFuPicgOiAnJ30ke2tGb3JtYXR0ZXIobGlzdGluZy5MX0xJU1RJTkdfUFJJQ0UpfWAsCiAgICAgICAgYWRkcmVzc19zdHJlZXQ6IGAke2xpc3RpbmcuTF9MSVNUSU5HQUREUjF9YCwKICAgICAgICBhZGRyZXNzOiBgJHtsaXN0aW5nLkxfTElTVElOR0FERFIxfSwgJHtsaXN0aW5nLkxfTElTVElOR0NJVFl9ICR7bGlzdGluZy5MX0xJU1RJTkdTVEFURX0gJHtsaXN0aW5nLkxfTElTVElOR1pJUH1gLAogICAgICAgIHByaWNlOiBgPGIgY2xhc3M9Imxpc3RpbmctcHJpY2UiPiR7Y3VycmVuY3lGb3JtYXQuZm9ybWF0KGxpc3RpbmcuTF9MSVNUSU5HX1BSSUNFKX08L2I+ICsgJHtjdXJyZW5jeUZvcm1hdC5mb3JtYXQobGlzdGluZy5MX0xJU1RJTkdfVEFYRVMpfSBUYXhgLAogICAgICAgIGFib3V0OiBgPHNwYW4+JHtsaXN0aW5nX2RldGFpbHMudHlwZSA/IGxpc3RpbmdfZGV0YWlscy50eXBlWzBdIDogcmVzcG9uc2UucGFyYW1zLkxDNF9WNDZDIH08L3NwYW4+PHNwYW4+JHtsaXN0aW5nLkxTX1RQX0dBUkFHRSAmJiBsaXN0aW5nLkxTX1RQX0dBUkFHRSAhPT0gJ05vbmUnID8gYDxiPmAgKyBsaXN0aW5nLkxTX1RQX0dBUkFHRSArIGAgR2FyYWdlPC9iPmAgOiAnTm8gR2FyYWdlJ308L3NwYW4+YCwKICAgICAgICBvbl9tYXJrZXQ6IGAke2xpc3RpbmcuTF9OT19EQVlTX09OX01BUktFVCA+IDEgPyAnQWN0aXZlICcgKyBkYXlzVG9ZTUQobGlzdGluZy5MX05PX0RBWVNfT05fTUFSS0VUKSA6ICcnfWAsCiAgICAgICAgcGhvdG9fdXJsOiBgaHR0cDovLyR7bGlzdGluZy5MUF9QSE9UT19VUkx9JHtsaXN0aW5nLkxfTUxTX05VTUJFUn1gLAogICAgICAgIHBob3RvX3VybF9leHQ6IGB4LmpwZ2AsCiAgICAgICAgc3dfdXJsOiBgaHR0cHM6Ly93d3cuc2hvcmV3ZXN0LmNvbS8ke2xpc3RpbmcuTF9MSVNUSU5HU1RBVEV9LyR7bGlzdGluZy5MX05NX0NPVU5UWX0vJHtsaXN0aW5nLkxfTElTVElOR0NJVFl9LyR7bGlzdGluZy5MU0VBUkNIX0RFVEFJTFVSTH0vJHtsaXN0aW5nLkxfTUxTX05VTUJFUn0tJHtsaXN0aW5nLkxfQ0RfU09VUkNFfWAKICAgICAgfSwKICAgIH0KICB9KTsKCiAgLy8gSW5pdGlhbGl6ZSBtYXBib3ggdi4zLjMuMSBiZWNhdXNlIGl0cyBmYXN0ZXIgdGhhbiBtYXBib3gtZ2wgc2luY2UgaXQgcmVuZGVycyB0aWxlcyBzZXJ2ZXItc2lkZQogIEwubWFwYm94LmFjY2Vzc1Rva2VuID0gJ3BrLmV5SjFJam9pYW5CdE1qTTBOVFlpTENKaElqb2lZMnRqT1d0Mk1ERjBNV3h1WkRKNWJIRmhiV2cyTlc5aGVDSjkuR3N0OVdKYTR5NE15MjNCR3IyMHVsZyc7CiAgbGV0IG1hcCA9IEwubWFwYm94Lm1hcCgnbWFwJyk7CiAgbWFwLnNldFZpZXcoWzQzLjA3MDk1MywtODcuODgyOTEyXSwgMTUpOwogIG1hcC5hZGRMYXllcihMLm1hcGJveC5zdHlsZUxheWVyKCdtYXBib3g6Ly9zdHlsZXMvbWFwYm94L3N0cmVldHMtdjExJywgeyB0aWxlTGF5ZXI6IHtmb3JtYXQ6ICdqcGc3MCd9IH0pKTsKCiAgLy8gU2V0IG1hcCBmZWF0dXJlcyBhbmQgdG9vbHRpcHMKICBjb25zdCBnZW9qc29uID0gYXdhaXQgTC5nZW9Kc29uKHsgdHlwZTogJ0ZlYXR1cmVDb2xsZWN0aW9uJywgZmVhdHVyZXM6IGZlYXR1cmVzIH0sIHsKICAgIG9uRWFjaEZlYXR1cmU6IGZ1bmN0aW9uIChmZWF0dXJlLCBsYXllcikgewogICAgICBjb25zdCBpbWFnZV9lbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNsaXN0aW5nLWltYWdlcycpOwogICAgICBjb25zdCBjb250ZW50ID0gYAogICAgICAgIDxkaXY+JHtsYXllci5mZWF0dXJlLnByb3BlcnRpZXMuYWRkcmVzc19zdHJlZXR9PC9kaXY+CiAgICAgICAgPGRpdj4ke2xheWVyLmZlYXR1cmUucHJvcGVydGllcy5wcmljZX08L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJsaXN0aW5nLXByb3BlcnR5Ij4ke2xheWVyLmZlYXR1cmUucHJvcGVydGllcy5hYm91dH08L2Rpdj4KICAgICAgICA8ZGl2PiR7bGF5ZXIuZmVhdHVyZS5wcm9wZXJ0aWVzLm9uX21hcmtldH08L2Rpdj4KICAgICAgICA8ZGl2PjxhIGhyZWY9IiR7bGF5ZXIuZmVhdHVyZS5wcm9wZXJ0aWVzLnN3X3VybH0iIHRhcmdldD0iX2JsYW5rIj5MaW5rPC9hPjwvZGl2PmA7CiAgICAgIGxheWVyLmJpbmRQb3B1cChjb250ZW50KTsKICAgIH0sCiAgICBwb2ludFRvTGF5ZXI6IGZ1bmN0aW9uKGZlYXR1cmUsIGxsKSB7CiAgICAgIHJldHVybiBMLm1hcmtlcihsbCwgewogICAgICAgIGljb246IEwuZGl2SWNvbih7CiAgICAgICAgICBjbGFzc05hbWU6ICdsYWJlbCcsCiAgICAgICAgICBodG1sOiBgPGRpdiBjbGFzcz0ibGlzdGluZy1tYXJrZXIiIGRhdGEtaW5kZXg9IiR7ZmVhdHVyZS5wcm9wZXJ0aWVzLmluZGV4fSI+JHtmZWF0dXJlLnByb3BlcnRpZXMudGl0bGV9PC9kaXY+YCwKICAgICAgICAgIGljb25TaXplOiBbNDUsIDIwXQogICAgICAgIH0pCiAgICAgIH0pOwogICAgfQogIH0pCiAgZ2VvanNvbi5hZGRUbyhtYXApOwoKICAvLyBIYW5kbGUgY2xpY2sgZXZlbnQgdG8gbG9hZCBpbWFnZXMKICBjb25zdCBpbWFnZV9lbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaXN0aW5nLWltYWdlcycpOwogIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgZSA9PiB7CiAgICBjb25zdCBsaXN0aW5nX21hcmtlcl9lbCA9IGUudGFyZ2V0LmNsb3Nlc3QoJy5saXN0aW5nLW1hcmtlcicpOwogICAgaWYoIWxpc3RpbmdfbWFya2VyX2VsKSByZXR1cm47CiAgICBjb25zdCBmZWF0dXJlID0gZmVhdHVyZXNbbGlzdGluZ19tYXJrZXJfZWwuZGF0YXNldC5pbmRleF07CiAgICBpZighZmVhdHVyZSkgcmV0dXJuOwogICAgaW1hZ2VfZWwuaW5uZXJIVE1MID0gJyc7CiAgICBsZXQgaSA9IDA7CiAgICB3aGlsZShpIDwgMjYpeyAvLyB3ZWlyZCBmaWxlbmFtaW5nIGNvbnZlbnRpb24gaGVyZQogICAgICBsZXQgdXJsID0gZmVhdHVyZS5wcm9wZXJ0aWVzLnBob3RvX3VybCArIFN0cmluZy5mcm9tQ2hhckNvZGUoOTcgKyBpKSArIGZlYXR1cmUucHJvcGVydGllcy5waG90b191cmxfZXh0OwogICAgICBpbWcgPSBhd2FpdCBsb2FkSW1hZ2UodXJsKQogICAgICBpZihpbWcgPT09IGZhbHNlKSBicmVhazsKICAgICAgaW1hZ2VfZWwuYXBwZW5kQ2hpbGQoaW1nKTsKICAgICAgaSsrOwogICAgfQogIH0pOwp9CgovLyBXYWl0IGZvciBpbml0CmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBpbml0KQoKPC9zY3JpcHQ+CjwvaGVhZD4KPGJvZHk+CiAgPGRpdj4KICAgIDxzZWN0aW9uPgogICAgICA8ZGl2IGlkPSJtYXAiPjwvZGl2PgogICAgPC9zZWN0aW9uPgogICAgPHNlY3Rpb24+CiAgICAgIDxkaXYgaWQ9Imxpc3RpbmctaW1hZ2VzIj48L2Rpdj4KICAgIDwvc2VjdGlvbj4KICA8L2Rpdj4KPC9ib2R5Pgo8L2h0bWw+Cg==