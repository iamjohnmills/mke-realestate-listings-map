data:text/html;base64,PGh0bWw+CjxoZWFkPgoKPHNjcmlwdCBzcmM9J2h0dHBzOi8vYXBpLm1hcGJveC5jb20vbWFwYm94LmpzL3YzLjMuMS9tYXBib3guanMnPjwvc2NyaXB0Pgo8bGluayBocmVmPSdodHRwczovL2FwaS5tYXBib3guY29tL21hcGJveC5qcy92My4zLjEvbWFwYm94LmNzcycgcmVsPSdzdHlsZXNoZWV0JyAvPgoKPHN0eWxlPgogICogeyBib3gtc2l6aW5nOiBib3JkZXItYm94OyB9CiAgaHRtbCwgYm9keSB7IG1hcmdpbjogMDsgfQogIGJvZHksIHRleHRhcmVhLCBpbnB1dCB7IGZvbnQtZmFtaWx5OiAtYXBwbGUtc3lzdGVtLEJsaW5rTWFjU3lzdGVtRm9udCxTZWdvZSBVSSxSb2JvdG8sSGVsdmV0aWNhIE5ldWUsVWJ1bnR1LHNhbnMtc2VyaWY7IGNvbG9yOiAjNGY1NjZiOyB9CiAgYm9keSB7IHRleHQtYWxpZ246IGNlbnRlcjsgYm94LXNpemluZzogYm9yZGVyLWJveDsgZm9udC1zaXplOiAxNHB4OyBsaW5lLWhlaWdodDogMS42MjU7IC13ZWJraXQtZm9udC1zbW9vdGhpbmc6IGFudGlhbGlhc2VkIH0KICBib2R5ID4gZGl2IHsgcG9zaXRpb246IGZpeGVkOyBkaXNwbGF5OiBmbGV4OyBoZWlnaHQ6IDEwMCU7IHdpZHRoOiAxMDAlOyB0ZXh0LWFsaWduOiBsZWZ0OyB9CiAgc2VjdGlvbjpmaXJzdC1jaGlsZCB7IGZsZXgtYmFzaXM6IDcwMHB4OyBmbGV4LXNocmluazogMDsgIH0KICBzZWN0aW9uOmxhc3QtY2hpbGQge2ZsZXgtZ3JvdzogMTsgb3ZlcmZsb3cteDogYXV0bzsgcG9zaXRpb246IHJlbGF0aXZlOyBiYWNrZ3JvdW5kOiAjMDAwfQogIHNlY3Rpb246bGFzdC1jaGlsZCBpbWcgeyBtYXgtd2lkdGg6IDEwMCU7IH0KCiAgI21hcCB7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7IH0KICAubGlzdGluZy1tYXJrZXIgeyBiYWNrZ3JvdW5kOiAjZmZmOyBsaW5lLWhlaWdodDogMTFweDsgY29sb3I6ICMwMDA7IGZvbnQtd2VpZ2h0OiBib2xkOyB0ZXh0LWFsaWduOiBjZW50ZXI7IGRpc3BsYXk6IGlubGluZS1ibG9jazsgZm9udC1zaXplOiAxMHB4OyBwYWRkaW5nOiAwIDJweDsgYm9yZGVyLXJhZGl1czogM3B4OyBib3JkZXI6IDFweCBzb2xpZCAjMDAwfQogIC5saXN0aW5nLW1hcmtlciA+IHNwYW4geyBjb2xvcjogb3JhbmdlOyBsaW5lLWhlaWdodDogMDsgcG9zaXRpb246IHJlbGF0aXZlOyB0b3A6IDZweDsgZm9udC1zaXplOiAyNnB4OyB9CiAgLmxpc3RpbmctcHJvcGVydHkgPiBzcGFuOmFmdGVyIHsgY29udGVudDogJy8nOyBwYWRkaW5nOiAwIDVweDsgfQogIC5saXN0aW5nLXByb3BlcnR5ID4gc3BhbjpsYXN0LWNoaWxkOmFmdGVyIHsgY29udGVudDogJyc7IHBhZGRpbmc6IDA7IH0KICAubGlzdGluZy1wcmljZSB7IGZvbnQtc2l6ZTogMTZweDsgY29sb3I6ICMwMDA7IH0KCiAgLmxlYWZsZXQtcG9wdXAgeyBtYXJnaW4tYm90dG9tOiAyMnB4OyB9CiAgLmxlYWZsZXQtcG9wdXAtY29udGVudC13cmFwcGVyIHsgYm9yZGVyOiAxcHggc29saWQgIzAwMDsgfQogIC5sZWFmbGV0LXBvcHVwLWNvbnRlbnQgeyBwYWRkaW5nOiAxMHB4OyB9CiAgLmxlYWZsZXQtcG9wdXAtdGlwLWNvbnRhaW5lciwgLmxlYWZsZXQtcG9wdXAtY2xvc2UtYnV0dG9uIHsgZGlzcGxheTogbm9uZTsgfQo8L3N0eWxlPgoKPHNjcmlwdD4KCmNvbnN0IHhoclVSTCA9IChvcHRpb25zKSA9PiB7CiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkgewogICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwogICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiByZXNvbHZlKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KSwgcGFyYW1zOiBvcHRpb25zLnBhcmFtcyB9KSk7CiAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCAoKSA9PiByZXNvbHZlKHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdFcnJvciBnZXR0aW5nIHRoZSBVUkwgJyArIG9wdGlvbnMudXJsIH0pKTsKICAgIHhoci5vcGVuKG9wdGlvbnMubWV0aG9kLCBvcHRpb25zLnVybCk7CiAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC10eXBlJywgb3B0aW9ucy5jb250ZW50X3R5cGUpOwogICAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhvcHRpb25zLnBhcmFtcykudG9TdHJpbmcoKTsKICAgIHhoci5zZW5kKHBhcmFtcyk7CiAgfSk7Cn0KCmNvbnN0IGN1cnJlbmN5Rm9ybWF0ID0gbmV3IEludGwuTnVtYmVyRm9ybWF0KCdlbi1VUycsIHsKICBzdHlsZTogJ2N1cnJlbmN5JywKICBjdXJyZW5jeTogJ1VTRCcsCiAgbWF4aW11bUZyYWN0aW9uRGlnaXRzOiAwLAp9KTsKCmNvbnN0IGtGb3JtYXR0ZXIgPSBudW0gPT4gewogIHJldHVybiBNYXRoLmFicyhudW0pID4gOTk5ID8gTWF0aC5zaWduKG51bSkqKChNYXRoLmFicyhudW0pLzEwMDApLnRvRml4ZWQoMSkpICsgJ2snIDogTWF0aC5zaWduKG51bSkqTWF0aC5hYnMobnVtKQp9Cgpjb25zdCBkYXlzVG9ZTUQgPSB4ID0+IHsKICBjb25zdCB5ID0gMzY1OwogIGNvbnN0IHkyID0gMzE7CiAgY29uc3QgcmVtYWluZGVyID0geCAlIHk7CiAgY29uc3QgY2FzaW8gPSByZW1haW5kZXIgJSB5MjsKICBjb25zdCB5ZWFyID0gKHggLSByZW1haW5kZXIpIC8geTsKICBjb25zdCBtb250aCA9IChyZW1haW5kZXIgLSBjYXNpbykgLyB5MjsKICBsZXQgcmVzdWx0ID0gYCR7KHllYXIgPyB5ZWFyICArICcgWWVhcnMgJzogJycpfSR7KG1vbnRoID8gbW9udGggKyAnIE1vbnRocyAnIDogJycpfSR7KGNhc2lvID8gY2FzaW8gKyAnIERheXMgJyA6ICcnKX1gOwogIHJldHVybiByZXN1bHQ7Cn0KCmNvbnN0IGxvYWRJbWFnZSA9IGFzeW5jIHVybCA9PiB7CiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLHJlamVjdCkgPT4gewogICAgbGV0IGltZyA9IG5ldyBJbWFnZSgpOwogICAgaW1nLnNyYyA9IHVybDsKICAgIGltZy5vbmxvYWQgPSAoKSA9PiB7CiAgICAgIGlmKGltZy5uYXR1cmFsV2lkdGggPT09IDApIHJldHVybiByZXNvbHZlKGZhbHNlKQogICAgICByZXR1cm4gcmVzb2x2ZShpbWcpOwogICAgfQogIH0pCn0KCmNvbnN0IGluaXQgPSBhc3luYyAoZXZlbnQpID0+IHsKCiAgLy8gR2V0IGRhdGEgZnJvbSBTaG9yZXdlc3QgLSBjcmF6eSBmYXN0CiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB4aHJVUkwoewogICAgbWV0aG9kOiAnUE9TVCcsCiAgICB1cmw6ICdodHRwczovL3d3dy5zaG9yZXdlc3QuY29tL3ZwL2pzcHMvQ09NTU9OL21hcHNfdjYvc3BoaW54My5qc3AnLAogICAgY29udGVudF90eXBlOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJywKICAgIHBhcmFtczogewogICAgICBTSVRFOiAnU0hPUkVXJywKICAgICAgTUFYX1JFU1VMVF9DT1VOVDogJzIwMCcsCiAgICAgIExMX1JFU19MQVRfTE9XOiAnNDIuOTk3NDUyOTIzMjUxODInLAogICAgICBMTF9SRVNfTEFUX0hJR0g6ICc0My4xNjE3MDM3OTA2MzI3MicsCiAgICAgIExMX1JFU19MT05HX0xPVzogJy04Ny45MjYzNTIwMjQwNzgzNycsCiAgICAgIExMX1JFU19MT05HX0hJR0g6ICctODcuNjkxODYyNTgzMTYwNCcsCiAgICAgIC8vTF9MSVNUSU5HU1RBVFVTOiAnU29sZCcsCiAgICAgIExfTElTVElOR1NUQVRVUzogJ0FjdGl2ZXxEZWxheWVkfEFjdGl2ZVdPfEFjdGl2ZSB3L0NvbnRyYWN0fFBlbmRpbmd8T2ZmZXItU2hvd3xPZmZlcicsCiAgICAgIExDNF9WNDZDOiAnVHdvIEZhbWlseXxNdWx0aS1GYW1pbHknLAogICAgICAvL0xDNF9WNDZDOiAnQnVzaW5lc3MvQ29tbWVyY2lhbCcsCiAgICAgIC8vTEM0X1Y0NkM6ICdTaW5nbGUgRmFtaWx5IFJlc2lkZW50aWFsJywKICAgICAgc29ydENyaXRlcmlhOiAnbF9saXN0aW5nX2RhdGUgREVTQycsCiAgICB9CiAgfSkKCiAgLy8gTm9ybWFsaXplIGRhdGEgaW4gR2VvSnNvbiBmb3JtYXQKICBjb25zdCBmZWF0dXJlcyA9IGF3YWl0IHJlc3BvbnNlLmRhdGEubGlzdGluZ3MubWFwKCAobGlzdGluZyxpKSA9PiB7CiAgICBjb25zdCBsaXN0aW5nX2RldGFpbHMgPSBKU09OLnBhcnNlKGxpc3RpbmcuTElTVElOR19HRU5BVFRSSUJTKTsKICAgIHJldHVybiB7CiAgICAgIHR5cGU6ICdGZWF0dXJlJywKICAgICAgZ2VvbWV0cnk6IHsKICAgICAgICB0eXBlOiAnUG9pbnQnLAogICAgICAgIGNvb3JkaW5hdGVzOiBbbGlzdGluZy5MTF9SRVNfTE9ORywgbGlzdGluZy5MTF9SRVNfTEFUXQogICAgICB9LAogICAgICBwcm9wZXJ0aWVzOiB7CiAgICAgICAgaW5kZXg6IGksCiAgICAgICAgdGl0bGU6IGAke3BhcnNlSW50KGxpc3RpbmcuTF9OT19EQVlTX09OX01BUktFVCkgPCAyID8gJzxzcGFuPiZidWxsOzwvc3Bhbj4nIDogJyd9JHtrRm9ybWF0dGVyKGxpc3RpbmcuTF9MSVNUSU5HX1BSSUNFKX1gLAogICAgICAgIGFkZHJlc3Nfc3RyZWV0OiBgJHtsaXN0aW5nLkxfTElTVElOR0FERFIxfWAsCiAgICAgICAgYWRkcmVzczogYCR7bGlzdGluZy5MX0xJU1RJTkdBRERSMX0sICR7bGlzdGluZy5MX0xJU1RJTkdDSVRZfSAke2xpc3RpbmcuTF9MSVNUSU5HU1RBVEV9ICR7bGlzdGluZy5MX0xJU1RJTkdaSVB9YCwKICAgICAgICBwcmljZTogYDxiIGNsYXNzPSJsaXN0aW5nLXByaWNlIj4ke2N1cnJlbmN5Rm9ybWF0LmZvcm1hdChsaXN0aW5nLkxfTElTVElOR19QUklDRSl9PC9iPiArICR7Y3VycmVuY3lGb3JtYXQuZm9ybWF0KGxpc3RpbmcuTF9MSVNUSU5HX1RBWEVTKX0gVGF4YCwKICAgICAgICBhYm91dDogYDxzcGFuPiR7bGlzdGluZ19kZXRhaWxzLnR5cGUgPyBsaXN0aW5nX2RldGFpbHMudHlwZVswXSA6IHJlc3BvbnNlLnBhcmFtcy5MQzRfVjQ2QyB9PC9zcGFuPjxzcGFuPiR7bGlzdGluZy5MU19UUF9HQVJBR0UgJiYgbGlzdGluZy5MU19UUF9HQVJBR0UgIT09ICdOb25lJyA/IGA8Yj5gICsgbGlzdGluZy5MU19UUF9HQVJBR0UgKyBgIEdhcmFnZTwvYj5gIDogJ05vIEdhcmFnZSd9PC9zcGFuPmAsCiAgICAgICAgb25fbWFya2V0OiBgJHtsaXN0aW5nLkxfTk9fREFZU19PTl9NQVJLRVQgPiAxID8gJ0FjdGl2ZSAnICsgZGF5c1RvWU1EKGxpc3RpbmcuTF9OT19EQVlTX09OX01BUktFVCkgOiAnJ31gLAogICAgICAgIHBob3RvX3VybDogYGh0dHA6Ly8ke2xpc3RpbmcuTFBfUEhPVE9fVVJMfSR7bGlzdGluZy5MX01MU19OVU1CRVJ9YCwKICAgICAgICBwaG90b191cmxfZXh0OiBgeC5qcGdgLAogICAgICAgIHN3X3VybDogYGh0dHBzOi8vd3d3LnNob3Jld2VzdC5jb20vJHtsaXN0aW5nLkxfTElTVElOR1NUQVRFfS8ke2xpc3RpbmcuTF9OTV9DT1VOVFl9LyR7bGlzdGluZy5MX0xJU1RJTkdDSVRZfS8ke2xpc3RpbmcuTFNFQVJDSF9ERVRBSUxVUkx9LyR7bGlzdGluZy5MX01MU19OVU1CRVJ9LSR7bGlzdGluZy5MX0NEX1NPVVJDRX1gCiAgICAgIH0sCiAgICB9CiAgfSk7CgogIC8vIEluaXRpYWxpemUgbWFwYm94IHYuMy4zLjEgYmVjYXVzZSBpdHMgZmFzdGVyIHRoYW4gbWFwYm94LWdsIHNpbmNlIGl0IHJlbmRlcnMgdGlsZXMgc2VydmVyLXNpZGUKICBMLm1hcGJveC5hY2Nlc3NUb2tlbiA9ICdway5leUoxSWpvaWFuQnRNak0wTlRZaUxDSmhJam9pWTJ0ak9XdDJNREYwTVd4dVpESjViSEZoYldnMk5XOWhlQ0o5LkdzdDlXSmE0eTRNeTIzQkdyMjB1bGcnOwogIGxldCBtYXAgPSBMLm1hcGJveC5tYXAoJ21hcCcpOwogIG1hcC5zZXRWaWV3KFs0My4wNzA5NTMsLTg3Ljg4MjkxMl0sIDE1KTsKICBtYXAuYWRkTGF5ZXIoTC5tYXBib3guc3R5bGVMYXllcignbWFwYm94Oi8vc3R5bGVzL21hcGJveC9zdHJlZXRzLXYxMScsIHsgdGlsZUxheWVyOiB7Zm9ybWF0OiAnanBnNzAnfSB9KSk7CgogIC8vIFNldCBtYXAgZmVhdHVyZXMgYW5kIHRvb2x0aXBzCiAgY29uc3QgZ2VvanNvbiA9IGF3YWl0IEwuZ2VvSnNvbih7IHR5cGU6ICdGZWF0dXJlQ29sbGVjdGlvbicsIGZlYXR1cmVzOiBmZWF0dXJlcyB9LCB7CiAgICBvbkVhY2hGZWF0dXJlOiBmdW5jdGlvbiAoZmVhdHVyZSwgbGF5ZXIpIHsKICAgICAgY29uc3QgaW1hZ2VfZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbGlzdGluZy1pbWFnZXMnKTsKICAgICAgY29uc3QgY29udGVudCA9IGAKICAgICAgICA8ZGl2PiR7bGF5ZXIuZmVhdHVyZS5wcm9wZXJ0aWVzLmFkZHJlc3Nfc3RyZWV0fTwvZGl2PgogICAgICAgIDxkaXY+JHtsYXllci5mZWF0dXJlLnByb3BlcnRpZXMucHJpY2V9PC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0ibGlzdGluZy1wcm9wZXJ0eSI+JHtsYXllci5mZWF0dXJlLnByb3BlcnRpZXMuYWJvdXR9PC9kaXY+CiAgICAgICAgPGRpdj4ke2xheWVyLmZlYXR1cmUucHJvcGVydGllcy5vbl9tYXJrZXR9PC9kaXY+CiAgICAgICAgPGRpdj48YSBocmVmPSIke2xheWVyLmZlYXR1cmUucHJvcGVydGllcy5zd191cmx9IiB0YXJnZXQ9Il9ibGFuayI+TGluazwvYT48L2Rpdj5gOwogICAgICBsYXllci5iaW5kUG9wdXAoY29udGVudCk7CiAgICB9LAogICAgcG9pbnRUb0xheWVyOiBmdW5jdGlvbihmZWF0dXJlLCBsbCkgewogICAgICByZXR1cm4gTC5tYXJrZXIobGwsIHsKICAgICAgICBpY29uOiBMLmRpdkljb24oewogICAgICAgICAgY2xhc3NOYW1lOiAnbGFiZWwnLAogICAgICAgICAgaHRtbDogYDxkaXYgY2xhc3M9Imxpc3RpbmctbWFya2VyIiBkYXRhLWluZGV4PSIke2ZlYXR1cmUucHJvcGVydGllcy5pbmRleH0iPiR7ZmVhdHVyZS5wcm9wZXJ0aWVzLnRpdGxlfTwvZGl2PmAsCiAgICAgICAgICBpY29uU2l6ZTogWzQ1LCAyMF0KICAgICAgICB9KQogICAgICB9KTsKICAgIH0KICB9KQogIGdlb2pzb24uYWRkVG8obWFwKTsKCiAgLy8gSGFuZGxlIGNsaWNrIGV2ZW50IHRvIGxvYWQgaW1hZ2VzCiAgY29uc3QgaW1hZ2VfZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGlzdGluZy1pbWFnZXMnKTsKICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jIGUgPT4gewogICAgY29uc3QgbGlzdGluZ19tYXJrZXJfZWwgPSBlLnRhcmdldC5jbG9zZXN0KCcubGlzdGluZy1tYXJrZXInKTsKICAgIGlmKCFsaXN0aW5nX21hcmtlcl9lbCkgcmV0dXJuOwogICAgY29uc3QgZmVhdHVyZSA9IGZlYXR1cmVzW2xpc3RpbmdfbWFya2VyX2VsLmRhdGFzZXQuaW5kZXhdOwogICAgaWYoIWZlYXR1cmUpIHJldHVybjsKICAgIGltYWdlX2VsLmlubmVySFRNTCA9ICcnOwogICAgbGV0IGkgPSAwOwogICAgd2hpbGUoaSA8IDI2KXsgLy8gd2VpcmQgZmlsZW5hbWluZyBjb252ZW50aW9uIGhlcmUKICAgICAgbGV0IHVybCA9IGZlYXR1cmUucHJvcGVydGllcy5waG90b191cmwgKyBTdHJpbmcuZnJvbUNoYXJDb2RlKDk3ICsgaSkgKyBmZWF0dXJlLnByb3BlcnRpZXMucGhvdG9fdXJsX2V4dDsKICAgICAgaW1nID0gYXdhaXQgbG9hZEltYWdlKHVybCkKICAgICAgaWYoaW1nID09PSBmYWxzZSkgYnJlYWs7CiAgICAgIGltYWdlX2VsLmFwcGVuZENoaWxkKGltZyk7CiAgICAgIGkrKzsKICAgIH0KICB9KTsKfQoKLy8gV2FpdCBmb3IgaW5pdApkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgaW5pdCkKCjwvc2NyaXB0Pgo8L2hlYWQ+Cjxib2R5PgogIDxkaXY+CiAgICA8c2VjdGlvbj4KICAgICAgPGRpdiBpZD0ibWFwIj48L2Rpdj4KICAgIDwvc2VjdGlvbj4KICAgIDxzZWN0aW9uPgogICAgICA8ZGl2IGlkPSJsaXN0aW5nLWltYWdlcyI+PC9kaXY+CiAgICA8L3NlY3Rpb24+CiAgPC9kaXY+CjwvYm9keT4KPC9odG1sPgo=